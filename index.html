<script src="https://d3js.org/d3.v5.min.js"></script>
<button type="button" onclick="changePosition()">SEE SOME MAGIC</button>

<svg id="canvas" width="800px" height="800px"></svg> <!-- Our HTML page contains an SVG element which we will
                             use as our canvas -->
<script>
  // http://eyalarubas.com/getting-started-with-d3js.html
  console.log(d3); // test if d3 is loaded
  var data = [{
    x: '25%',
    y: '25%',
    r: '1%',
    c: 'red'
}, {
    x: '25%',
    y: '50%',
    r: '1%',
    c: 'green'
}, {
    x: '75%',
    y: '75%',
    r: '1%',
    c: 'blue'
}];;

//alert(data[0].x); it works until now

  // Add an SVG
  var canvas = d3.select('#canvas');
  // Add Circles
  // We bind our circles data to DOM elements (or SVG shapes in our case).
  var circles = canvas
    .selectAll('circle')
    .data(data);

    // now we have to append the circles to our canvas since they don't exist yet
    circles
      .enter()
      .append('circle')
      .attr('cx', function(d) { // x coordinate of the circle
          return d.x;
      })
      .attr('cy', function(d) { // y coordinate of the circle
          return d.y;
      })
      .attr('fill', function(d){ // color of the circle
          return d.c;
      })
      .attr('r', function(d) { // radius of the circle
          return d.r;
      });
      //note that d is initialized with the value of the current datum

      // Add rectangles
      var data2 = [{
        x: '5%',
        y: '5%',
        width: '2%',
        height: '2%',
        c: 'red'
    }, {
        x: '5%',
        y: '5%',
        width: '2%',
        height: '2%',
        c: 'red'
    }, {
        x: '5%',
        y: '7%',
        width: '2%',
        height: '2%',
        c: 'red'
    }, {
        x: '5%',
        y: '7%',
        width: '2%',
        height: '2%',
        c: 'red'
    }, {
        x: '5%',
        y: '9%',
        width: '2%',
        height: '2%',
        c: 'red'
    }, {
        x: '5%',
        y: '9%',
        width: '2%',
        height: '2%',
        c: 'red'
    }, {
        x: '5%',
        y: '11%',
        width: '2%',
        height: '2%',
        c: 'red'
    },  {
        x: '5%',
        y: '11%',
        width: '2%',
        height: '2%',
        c: 'red'
    }];

    var rectangles = canvas
      .selectAll('rect')
      .data(data2);

    rectangles
      .enter()
      .append('rect')
      .attr('x', function(d) { // x coordinate of the circle
          return d.x;
      })
      .attr('y', function(d) { // y coordinate of the circle
          return d.y;
      })
      .attr('width', function(d){
        return d.width;
      })
      .attr('height', function(d){
        return d.height;
      })
      .attr('fill', function(d){ // color of the circle
          return d.c;
      });


   var line = canvas.append("line")
    .attr("x1", 5)
    .attr("y1", 5)
    .attr("x2", 50)
    .attr("y2", 50)
    .attr("stroke-width", 2)
    .attr("stroke", "black");

   // Add Polygons

    function changePosition() {
      // now we make some changes in our data
      // change coordinates of the first circle:
      data2[0].x = '35%';
      data2[1].x = '37%';
      data2[2].x = '35%';
      data2[3].x = '39%';
      data2[4].x = '35%';
      data2[5].x = '39%';
      data2[6].x = '35%';
      data2[7].x = '37%';

      /*
      // add a new circle:
      data.push({
        x: '25%',
        y: '50%',
        r: '1%',
        c: 'magenta'
      }); */

      //we bind our data with circles again as we did before
      var rectangles = canvas
        .selectAll('rect')
        .data(data2);

      // the below code will only add the new circles but will not update the
      // existing ones (note that we modified the x coordinate of the first
      // circle).

      /*
      rectangles
        .enter()
        .append('rect')
        .attr('y', function(d) { // y coordinate of the circle
            return d.y;
        })
        .attr('width', function(d){
          return d.width;
        })
        .attr('height', function(d){
          return d.height;
        })
        .attr('fill', function(d){ // color of the circle
            return d.c;
        })
        .transition()
        .attr('x', function(d) { // x coordinate of the circle
            return d.x;
        }); */

      // in order to update the attributes of the existing circles (in this
      //case only the x and y coordinates) we do the following:

      rectangles
        .transition()
        .attr('x', function(d) {
            return d.x;
        });

      // exit() filters the selection only to select elements which are bound
      // to datums that no longer exist. We remove them from our canvas (and
      // from the document altogether)
      circles
        .exit()
        .remove();
    }







   // This is a test to see if the 1st github requirement is all set:)
</script>
